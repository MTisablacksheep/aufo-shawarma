# Auto-Shawarma

全自动沙威玛小工具，让我们说 Python ~

借助 OpenCV 图像识别，看游戏自己玩，即使顾客自选配料也能满足需要！

**已实现功能：**

- **手动模式**
  - 使用按键进行各种操作
    - 制作沙威玛
    - 准备饮料
    - 盛薯条
    - 识别顾客订单并上菜

- **半自动模式**：在手动模式的基础上增加了
  - 自动打小偷、叫乞丐
  - 自动取出烤好的沙威玛避免烤焦

  在没有键盘指令时：
  - 自动准备饮料和盛薯条
  - 自动切薯条和炸薯条
  - 自动定时收钱

- **全自动模式**：在半自动模式的基础上增加了
  - 根据顾客需求自动制作沙威玛，支持自选配料！
  - 自动上菜

在解锁 自动切肉、店员升级、包装机升级 前，未实现全自动模式的支持，建议在解锁前使用手动模式。

现已支持 Steam 版本布局，也已支持 960x540 ~ 3840x2160 多种分辨率。


## 安装启动

工具需要以下依赖库：
- `mss` - 截取屏幕
- `opencv-python` - 图像识别
  - `numpy` - 图像数据处理，是 OpenCV 的依赖
- `pynput` - 键盘输入监听与鼠标控制

启动终端进入仓库目录，执行以下命令：

- 安装：`pip install -r requirements.txt`

- 修改配置文件 `config.py`，输入游戏内各物品的升级情况

- 启动：`python main.py`

    此时提示 `>> Main loop start` 表示脚本开始接受键盘输入
    
- 退出：按 `Esc` 键退出脚本


## 按键操作

进入营业状态后，按键切换到三种工作模式之一，脚本会从屏幕截图中识别并定位窗口，成功后进入工作模式。结束一天的营业后，按 `9` 停止脚本工作。

|    控制按键     | 功能       |
| :-------------: | ---------- |
| `Esc` / `Pause` | 退出       |
|       `9`       | 停止工作   |
|       `0`       | 手动模式   |
|       `-`       | 半自动模式 |
|       `=`       | 全自动模式 |

|      按键       | 功能                                           |
| :-------------: | ---------------------------------------------- |
|       `S`       | 制作普通沙威玛                                 |
| `Q` `W` `E` `R` | 分别制作不加 石榴酱、黄瓜、白酱、薯条 的沙威玛 |
|     `1`~`5`     | 为对应位置的顾客上菜                           |
|       `D`       | 收钱                                           |
|       `T`       | 准备饮料                                       |
|     `F` `V`     | 分两步盛薯条                                   |


## 配置文件

使用时，需修改配置文件 `config.py`，输入游戏内各物品的升级情况。

文件内各变量下有注释说明，根据游戏内各物品升级情况修改，修改后重启脚本生效。
